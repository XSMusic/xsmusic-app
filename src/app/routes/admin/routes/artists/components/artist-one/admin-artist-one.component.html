<form *ngIf="artist" @inOut class="grid grid-cols-1 gap-4 lg:grid-cols-2">
  <images-edit-block
    [item]="artist"
    (showImage)="showImage($event)"
    (removeImage)="removeImage($event)"
    (setFirstImage)="setFirstImage($event)"
  ></images-edit-block>

  <div class="grid grid-cols-2 gap-4">
    <div class="col-span-2 md:col-span-1">
      <label for="name" class="block mb-3 text-base font-extrabold text-black">
        Nombre
      </label>
      <div class="flex">
        <input
          name="name"
          type="text"
          (keydown.enter)="$event.preventDefault(); onKeyUpName()"
          [(ngModel)]="artist.name"
          placeholder="Introduce el nombre"
          class="w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-y-md rounded-l-md"
        />
        <button
          class="px-3 bg-gray-100 rounded-r-lg cursor-pointer hover:opacity-80"
          (click)="onKeyUpName()"
        >
          <svg-icon name="search"></svg-icon>
        </button>
      </div>
    </div>

    <div class="col-span-2 md:col-span-1">
      <label
        for="country"
        class="flex gap-2 mb-3 text-base font-extrabold text-black"
      >
        Pais
        <img
          *ngIf="artist.country !== ''"
          [src]="artist.country! | countryFlag"
          [alt]="artist.country"
        />
      </label>
      <select
        name="country"
        [(ngModel)]="artist.country"
        placeholder="Introduce el codigo del pais"
        class="w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-md"
      >
        <option *ngFor="let countryItem of countries" [value]="countryItem.id">
          {{ countryItem.name }}
        </option>
      </select>
    </div>

    <div class="col-span-2 md:col-span-1">
      <label
        for="birthdate"
        class="block mb-3 text-base font-extrabold text-black"
      >
        Fecha nacimiento
      </label>
      <input
        name="birthdate"
        type="text"
        [(ngModel)]="artist.birthdate"
        placeholder="Introduce la fecha de nacimiento en formato ingles"
        class="w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-md"
      />
    </div>

    <div class="col-span-2 md:col-span-1">
      <label
        for="gender"
        class="block mb-3 text-base font-extrabold text-black"
      >
        Genero
      </label>
      <select
        name="gender"
        type="text"
        [(ngModel)]="artist.gender"
        placeholder="Introduce el Genero"
        class="w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-md"
      >
        <option value="male">Hombre</option>
        <option value="female">Mujer</option>
        <option value="various">Varios</option>
      </select>
    </div>

    <div class="col-span-2">
      <label class="block mb-3 text-base font-extrabold text-black">
        <span class="text-gray-700">Estilos</span>
      </label>
      <div class="flex gap-2 my-3">
        <span
          (click)="onClickStyleItem(styleSelected)"
          class="px-2 py-1 text-xs bg-gray-100 border rounded-lg shadow-md cursor-pointer"
          *ngFor="let styleSelected of artist.styles"
        >
          {{ styleSelected.name }}
        </span>
      </div>
      <select
        class="w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-md form-multiselect"
        (change)="onChangeStyleSelect($event)"
      >
        <option [disabled]="true">Selecciona estilo</option>
        <option *ngFor="let style of styles" [value]="style._id">
          {{ style.name }}
        </option>
      </select>

      <div class="flex gap-2 my-3" *ngIf="scraping.styles.length > 0">
        <span
          (click)="onClickStyleScrapingItem(styleScraping)"
          class="px-2 py-1 text-xs bg-gray-100 border rounded-lg shadow-md cursor-pointer"
          *ngFor="let styleScraping of scraping.styles"
        >
          {{ styleScraping.name }}
        </span>
      </div>
    </div>
  </div>

  <div class="col-span-2">
    <label for="image" class="block mb-3 text-base font-extrabold text-black">
      Imagen
    </label>
    <div class="flex">
      <input
        name="image"
        type="text"
        [(ngModel)]="image.url"
        placeholder="Introduce la imagen"
        (keydown.enter)="$event.preventDefault(); uploadImageByUrl()"
        class="object-cover w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-l-md"
      />
      <button
        class="px-3 bg-gray-100 rounded-r-lg cursor-pointer hover:opacity-80"
        (click)="uploadImageByUrl()"
      >
        <svg-icon name="plus"></svg-icon>
      </button>
    </div>
  </div>

  <!-- <div class="col-span-2">
    <label for="image" class="block mb-3 text-base font-extrabold text-black">
      Imagen
    </label>
    <input
      name="image"
      type="text"
      [(ngModel)]="artist.images![0].url ?? ''"
      placeholder="Introduce la imagen"
      class="object-cover w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-md"
    />
    <div class="grid grid-cols-2 mt-2 overflow-hidden cursor-pointer">
      <div *ngFor="let image of scraping.images" class="p-2">
        <img
          class="object-cover w-full m-2 rounded-lg shadow-xl h-60 hover:filter-grayscale"
          [src]="image"
          [alt]="image"
          (click)="showImage(image)"
        />
        <button
          (click)="selectImage(image)"
          class="w-full p-2 m-2 shadow-md rounded-xl hover:opacity-80"
          [ngClass]="{
            'bg-black text-white': image === artist.image,
            'bg-gray-100 text-black': image !== artist.image
          }"
        >
          Seleccionar
        </button>
      </div>
    </div>
  </div> -->

  <div class="col-span-2 mb-1 md:col-span-1">
    <label for="web" class="block mb-3 text-base font-extrabold text-black">
      Web
    </label>
    <input
      name="web"
      type="text"
      [(ngModel)]="artist.social.web"
      placeholder="Introduce Web"
      class="w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-md"
    />
  </div>
  <div class="col-span-2 mb-1 md:col-span-1">
    <label
      for="facebook"
      class="block mb-3 text-base font-extrabold text-black"
    >
      Facebook
    </label>
    <input
      name="facebook"
      type="text"
      [(ngModel)]="artist.social.facebook"
      placeholder="Introduce Facebook"
      class="w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-md"
    />
  </div>
  <div class="col-span-2 mb-1 md:col-span-1">
    <label for="twitter" class="block mb-3 text-base font-extrabold text-black">
      Twitter
    </label>
    <input
      name="twitter"
      type="text"
      [(ngModel)]="artist.social.twitter"
      placeholder="Introduce Ttwitter"
      class="w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-md"
    />
  </div>
  <div class="col-span-2 mb-1 md:col-span-1">
    <label
      for="soundcloud"
      class="block mb-3 text-base font-extrabold text-black"
    >
      Soundcloud
    </label>
    <input
      name="soundcloud"
      type="text"
      [(ngModel)]="artist.social.soundcloud"
      placeholder="Introduce Soundcloud"
      class="w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-md"
    />
  </div>

  <div class="col-span-2 mb-1 md:col-span-1">
    <label for="spotify" class="block mb-3 text-base font-extrabold text-black">
      Spotify
    </label>
    <input
      name="spotify"
      type="text"
      [(ngModel)]="artist.social.spotify"
      placeholder="Introduce Spotify"
      class="w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-md"
    />
  </div>

  <div class="col-span-2 mb-1 md:col-span-1">
    <label for="tiktok" class="block mb-3 text-base font-extrabold text-black">
      TikTok
    </label>
    <input
      name="tiktok"
      type="text"
      [(ngModel)]="artist.social.tiktok"
      placeholder="Introduce Tiktok"
      class="w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-md"
    />
  </div>

  <div class="col-span-2 mb-1 md:col-span-2">
    <label
      for="instagram"
      class="block mb-3 text-base font-extrabold text-black"
    >
      Instagram
    </label>
    <input
      name="instagram"
      type="text"
      [(ngModel)]="artist.social.instagram"
      placeholder="Introduce Instagram"
      class="w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-md"
    />
  </div>

  <div class="col-span-2 mb-1">
    <label for="info" class="block mb-3 text-base font-extrabold text-black">
      Info
    </label>
    <textarea
      name="info"
      type="text"
      [(ngModel)]="artist.info"
      placeholder="Introduce informacion"
      class="w-full px-6 text-base font-medium bg-white border border-gray-200 rounded-md"
      rows="5"
    ></textarea>
    <div
      class="grid grid-cols-1 mt-2 overflow-hidden rounded-lg cursor-pointer lg:grid-cols-2"
    >
      <div
        class="px-3 py-2 mx-1 my-1 border rounded-lg"
        *ngFor="let info of scraping.infos"
      >
        <div
          [innerHTML]="info | truncateText: 100"
          (click)="showInfo(info)"
        ></div>
        <button
          (click)="selectInfo(info)"
          class="w-full p-2 mt-2 text-black bg-gray-100 shadow-md hover:bg-gray-200 rounded-xl"
          [ngClass]="{
            'bg-black text-white': info === artist.info,
            'bg-gray-100 text-black': info !== artist.info
          }"
        >
          Seleccionar
        </button>
      </div>
    </div>
  </div>

  <div class="col-span-2 mb-2">
    <button
      type="submit"
      (click)="onSubmit()"
      class="w-full py-1 m-1 text-white bg-green-500 border-green-500 rounded-lg shadow-md md:w-32 hover:bg-green-600 hover:border-green-600'"
    >
      Guardar
    </button>
    <button
      type="button"
      *ngIf="artist._id"
      (click)="onDelete()"
      class="w-full py-1 m-1 text-white bg-red-500 border-2 border-red-500 rounded-lg shadow-md hover:bg-red-600 hover:border-red-600 hover:text-white md:w-32"
    >
      Eliminar
    </button>

    <button
      type="button"
      *ngIf="artist._id"
      [routerLink]="['/artists/profile/', artist.slug]"
      class="w-full py-1 m-1 text-white bg-blue-500 border-2 border-blue-500 rounded-lg shadow-md hover:bg-blue-600 hover:border-blue-600 hover:text-white md:w-32"
    >
      Ver perfil
    </button>
  </div>
</form>
