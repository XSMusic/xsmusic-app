<header-custom
  [title]="vm.title"
  [total]="vm.total"
  (onClickTitle)="goToPage({admin: false, typeRoute: 'all'})"
></header-custom>

<div class="container px-4 pt-3 mx-auto max-w-full-xl sm:pb-0 max-w-7sm">
  <tabs
    *ngIf="vm.typeTabs"
    [type]="vm.typeTabs"
    [view]="vm.view"
    (search)="onSearch($event)"
    (onFilter)="onFilter($event)"
    (onClickTab)="onClickTab($event)"
  ></tabs>

  <alert
    type="info"
    message="Filtro activado."
    actionText="Quitar"
    (action)="removeFilter()"
    *ngIf="vm.filter"
  ></alert>

  <ng-container *ngIf="type === 'artist'">
    <artists-view-list
      *ngIf="vm.view === 'viewList'"
      [artists]="vm.artists"
      [loading]="vm.loading"
      (goToPage)="goToPage($event)"
      (filter)="onFilter($event)"
      (onScroll)="onScroll()"
    >
    </artists-view-list>

    <admin-artist-one
      *ngIf="vm.view === 'viewAdd'"
      [artist]="vm.artist"
      [scraping]="vm.scraping"
      (onSubmit)="onSubmit()"
      (showImage)="showImage($event)"
      (uploadImageByUrl)="uploadImageByUrl($event)"
      (uploadImageByFile)="uploadImageByFile($event)"
    ></admin-artist-one>
  </ng-container>

  <ng-container *ngIf="type === 'event'">
    <events-view-list
      *ngIf="vm.view === 'viewList'"
      [items]="vm.events"
      [loading]="vm.loading"
      (goToPage)="goToPage($event)"
      (filter)="onFilter($event)"
      (onScroll)="onScroll()"
    >
    </events-view-list>

    <ng-container *ngIf="vm.view === 'viewScraping'">
      <admin-events-scraping
        (onEventCreated)="reloadItems()"
      ></admin-events-scraping>
    </ng-container>
  </ng-container>

  <ng-container *ngIf="type === 'media'">
    <media-view-list
      *ngIf="vm.view === 'viewList'"
      [media]="vm.medias"
      [loading]="vm.loading"
      [type]="subType === 'set' ? 'set' : 'track'"
      (goToPage)="goToPage($event)"
      (filter)="onFilter($event)"
      (onScroll)="onScroll()"
    ></media-view-list>

    <ng-container *ngIf="vm.view === 'viewAdd'">
      <admin-media-add-search
        [source]="vm.mediaSource"
        [searchText]="vm.searchText"
        (onChangeSource)="vm.mediaSource = $event"
        (search)="searchAdd($event)"
      ></admin-media-add-search>

      <div *ngIf="vm.media?.name === ''">
        <admin-media-add-search-items
          [items]="vm.itemsSearch"
          [itemSelected]="vm.scrapingItemSelected!"
          (selectItem)="selectItem($event)"
        ></admin-media-add-search-items>
      </div>

      <admin-media-one
        *ngIf="vm.media?.name !== ''"
        [media]="vm.media"
        [scraping]="vm.scraping"
        (onSubmitSuccess)="onCreated()"
      ></admin-media-one>
    </ng-container>
  </ng-container>

  <ng-container *ngIf="type === 'site'">
    <sites-view-list
      *ngIf="vm.view === 'viewList'"
      [sites]="vm.sites"
      [loading]="vm.loading"
      [type]="subType === 'club' ? 'clubs' : 'festivals'"
      (goToPage)="goToPage($event)"
      (filter)="onFilter($event)"
      (onScroll)="onScroll()"
    ></sites-view-list>

    <admin-site-one
      *ngIf="vm.view === 'viewAdd'"
      [site]="vm.site"
      [type]="subType === 'club' ? 'club' : 'festival'"
      [scraping]="vm.scraping"
      (onSubmit)="onSubmit()"
      (showImage)="showImage($event)"
      (uploadImageByUrl)="uploadImageByUrl($event)"
      (uploadImageByFile)="uploadImageByFile($event)"
    ></admin-site-one>
  </ng-container>

  <ng-container *ngIf="type === 'style'">
    <styles-view-list
      *ngIf="vm.view === 'viewList'"
      [styles]="vm.styles"
      [loading]="vm.loading"
      (onScroll)="onScroll()"
    ></styles-view-list>
  </ng-container>

  <ng-container *ngIf="type === 'user'">
    <users-view-list
      *ngIf="vm.view === 'viewList'"
      [users]="vm.users"
      [loading]="vm.loading"
      (onScroll)="onScroll()"
    ></users-view-list>
  </ng-container>

  <ng-container *ngIf="type === 'user'"></ng-container>

  <div
    class="grid gap-2 mt-2 md:gap-4 md:grid-cols-3"
    *ngIf="vm.view === 'viewStats'"
  >
    <block-stats
      *ngIf="vm.stats.topSocial && vm.stats.topSocial.length > 0"
      type="topSocial"
      [items]="vm.stats.topSocial"
    ></block-stats>
    <block-stats
      *ngIf="vm.stats.topCountries && vm.stats.topCountries.length > 0"
      type="topCountries"
      [items]="vm.stats.topCountries"
    ></block-stats>
    <block-stats
      *ngIf="vm.stats.topStates && vm.stats.topStates.length > 0"
      type="topStates"
      [items]="vm.stats.topStates"
    ></block-stats>
    <block-stats
      *ngIf="vm.stats.topStyles && vm.stats.topStyles.length > 0"
      type="topStyles"
      [items]="vm.stats.topStyles"
    ></block-stats>
    <block-stats
      *ngIf="vm.stats.topVarious && vm.stats.topVarious.length > 0"
      type="topVarious"
      [items]="vm.stats.topVarious"
    ></block-stats>
  </div>
</div>
